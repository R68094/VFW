// Main JS file
var meleeWeapons = 
[{title: "Sword", description: "A brute force weapon used for hacking and slashing."},
 {title: "Dagger", description: "A small subtle weapon used from various weak points on an enemey for sudden devasting blows to vital organs."}, 
 {title: "Fists", description: "A true warrior uses only his fists to deal blunt damage to a worthy foe."}]; 
 
var rangedWeapons = 
[{title: "Bow", description: "A silent ranged weapon for skilled warriors to attack vital spots on an enemy with light armor."}, 
{title: "Gun", description: "A loud all be it powerful ranged weapon used to blow enemies with the heaviest of armor away."}, 
{title: "Wand", description: "A mystical and terrifying weapon wielded by only the intellectually capable and magically inclined warrior to cast spells on enemies."}];

var mainWindow = Ti.UI.createWindow({
	backgroundColor: "#f5f5f5"
});

var topView = Ti.UI.createView({
	height: 50,
	backgroundColor: "#fff",
	top: 0,	
});

var topViewBorder = Ti.UI.createView({
	backgroundColor: "#dbdbdb",
	height: 2,
	top: topView.height + topView.top
});

var topViewLabel = Ti.UI.createLabel({
	text: "Weapons of War",
	font: {fontSize: 18, fontFamily: "Arial", fontWeight: "Bold"},
	top: 25,
	textAlign: "center",
});

var weapons = Ti.UI.createTableView({
	data: weapons,
	top: topViewBorder.top + topViewBorder.height + 10,
});

if(Ti.Platform.name === "iPhone OS"){
	weapons.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

var meleeSection = Ti.UI.createTableViewSection({
	headerTitle: "Melee Weapons",
	footerTitle: "For tough Face to Face combat!"
});

var rangedSection = Ti.UI.createTableViewSection({
	headerTitle: "Ranged Weapons",
	footerTitle: "For Destruction from Afar!"
});

var getInfo = function(){
	var infoWindow = Ti.UI.createWindow({
		backgroundColor: "f5f5f5",
	});
		var infoTopView = Ti.UI.createView({
		height: 50,
		backgroundColor: "#fff",
		top: 0,	
	});
	
	var infoTopViewBorder = Ti.UI.createView({
		backgroundColor: "#dbdbdb",
		height: 2,
		top: infoTopView.height + infoTopView.top
	});
	
	var infoTopViewLabel = Ti.UI.createLabel({
		text: this.title,
		font: {fontSize: 18, fontFamily: "Arial", fontWeight: "Bold"},
		top: 25,
		textAlign: "center",
	});	
	
	var infoText = Ti.UI.createLabel({
		text: this.desc,
		font: {fontSize: 12, fontFamily: "arial"},
		top: infoTopViewBorder.height + infoTopViewBorder.top + 30,
		left: 15,
		right: 15,
	});
	
	var returnButton = Ti.UI.createLabel({
		text: "Return Button",
		backgroundColor: "#23ba00",
		color: "#fff",
		height: 50,
		font: {fontSize: 14, fontFamily: "Arial"},
		width: "100%",
		bottom: 0,
		textAlign: "center",
	});
	
	var returnWindow = function(){
		infoWindow.close();
	};
	returnButton.addEventListener("click", returnWindow);
	
	infoTopView.add(infoTopViewLabel);
	infoWindow.add(infoTopView, infoTopViewBorder, infoText, returnButton);
	infoWindow.open();
};

for(var i = 0, j = meleeWeapons.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: meleeWeapons[i].title,
		desc: meleeWeapons[i].description,
		hasChild: true,
	});
	meleeSection.add(theRow);
	theRow.addEventListener("click", getInfo);
};

for(var i = 0, j = rangedWeapons.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: rangedWeapons[i].title,
		desc: rangedWeapons[i].description,
		hasChild: true
	});
	rangedSection.add(theRow);
	theRow.addEventListener("click", getInfo);
};

var weaponSections = [meleeSection, rangedSection];

weapons.setData(weaponSections);

topView.add(topViewLabel);
mainWindow.add(topView, topViewBorder, weapons);
mainWindow.open();
